# =============================================================================
# Skylite UX Docker Compose Examples
# =============================================================================
# Choose ONE of the following configurations:
#
# 1. SQLite (Recommended) - Simple, single container, no external database
# 2. PostgreSQL - For production or multi-user deployments
# =============================================================================

# -----------------------------------------------------------------------------
# OPTION 1: SQLite (Recommended for most users)
# -----------------------------------------------------------------------------
# Uncomment this section for SQLite (and comment out the PostgreSQL section)
#
# services:
#   skylite-ux:
#     image: y3knik/skylite-ux:latest
#     restart: unless-stopped
#     environment:
#       - NUXT_PUBLIC_TZ=America/Chicago
#       - NUXT_PUBLIC_LOG_LEVEL=warn
#       # Google OAuth Configuration (required for Google Calendar, Photos, and Tasks)
#       # Get credentials from: https://console.cloud.google.com/
#       - GOOGLE_CLIENT_ID=
#       - GOOGLE_CLIENT_SECRET=
#     volumes:
#       - ./data:/data
#     ports:
#       - 3000:3000

# -----------------------------------------------------------------------------
# OPTION 2: PostgreSQL
# -----------------------------------------------------------------------------
services:
  skylite-ux:
    image: y3knik/skylite-ux:latest
    restart: unless-stopped
    environment:
      - DATABASE_URL=postgresql://skylite:password@skylite-ux-db:5432/skylite
      - NUXT_PUBLIC_TZ=America/Chicago
      - NUXT_PUBLIC_LOG_LEVEL=warn
      # Google OAuth Configuration (required for Google Calendar, Photos, and Tasks)
      # Get credentials from: https://console.cloud.google.com/
      - GOOGLE_CLIENT_ID=
      - GOOGLE_CLIENT_SECRET=
    depends_on:
      skylite-ux-db:
        condition: service_healthy
    ports:
      - 3000:3000
    networks:
      - skylite-network

  skylite-ux-db:
    image: postgres:16
    restart: unless-stopped
    environment:
      - POSTGRES_USER=skylite
      - POSTGRES_PASSWORD=password
      - POSTGRES_DB=skylite
    volumes:
      - postgres-data:/var/lib/postgresql/data
    healthcheck:
      test: [CMD-SHELL, pg_isready -U skylite]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - skylite-network

networks:
  skylite-network:
    driver: bridge

volumes:
  postgres-data:
    driver: local
